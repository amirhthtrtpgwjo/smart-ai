<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ’ Ø³Ú©Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ AI - Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazirmatn@33.0.3/Vazirmatn-font-face.css">
  <style>
    :root {
      --primary: #00ffcc;
      --secondary: #ff6f61;
      --accent: #ffd700;
      --bg-ice-blue: linear-gradient(135deg, #1e3c72, #2a5298, #a1c4fd);
      --text-dark: white;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Vazirmatn', Arial, sans-serif;
    }
    body {
      background: var(--bg-ice-blue);
      color: var(--text-dark);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding: 20px;
    }
    .game-container {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 2rem;
      width: 100%;
      max-width: 450px;
      text-align: center;
    }
    .header h1 {
      font-size: 2rem;
      color: var(--accent);
    }
    .stats {
      margin: 1rem 0;
    }
    .stat-item {
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      margin-bottom: 10px;
    }
    .coin {
      width: 120px;
      height: 120px;
      background: gold;
      border-radius: 50%;
      margin: 1rem auto;
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .btn {
      background: var(--secondary);
      color: white;
      border: none;
      padding: 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
    }
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      padding: 2rem;
      border-radius: 16px;
      text-align: center;
      max-width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    .modal.active {
      display: block;
    }
    .item {
      background: rgba(255,255,255,0.1);
      padding: 0.8rem;
      border-radius: 8px;
      margin: 0.5rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="header">
      <h1>ğŸ’ Ø³Ú©Ù‡ AI</h1>
      <div class="stats">
        <div class="stat-item">Ø³Ú©Ù‡â€ŒÙ‡Ø§: <span id="score">0</span></div>
        <div class="stat-item">ØªÙ¾â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: <span id="tap-limit">1000</span></div>
      </div>
    </div>
    <div class="coin" id="coin">AI</div>
    <button class="btn" id="daily-reward">Ø¯Ø±ÛŒØ§ÙØª Ø³Ú©Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡</button>
    <button class="btn" id="shop-btn">ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</button>
    <button class="btn" id="missions-btn">ğŸ¯ Ù…Ø§Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§</button>
    <button class="btn" id="settings-btn">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
  </div>

  <!-- Ù…Ø¯Ø§Ù„ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
  <div class="modal" id="shop-modal">
    <h2>ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>
    <div id="shop-list"></div>
    <button class="btn" id="close-shop">Ø¨Ø³ØªÙ†</button>
  </div>

  <!-- Ù…Ø¯Ø§Ù„ Ù…Ø§Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ -->
  <div class="modal" id="missions-modal">
    <h2>Ù…Ø§Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§</h2>
    <div id="missions-list"></div>
    <button class="btn" id="close-missions">Ø¨Ø³ØªÙ†</button>
  </div>

  <!-- Ù…Ø¯Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
  <div class="modal" id="settings-modal">
    <h2>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h2>
    <button class="btn" id="change-sound">ØªØºÛŒÛŒØ± ØµØ¯Ø§ÛŒ Ú©Ù„ÛŒÚ©</button>
    <button class="btn" id="close-settings">Ø¨Ø³ØªÙ†</button>
  </div>

  <audio id="tap-sound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>

  <script>
    // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ù…ØªÛŒØ§Ø² Ùˆ ØªÙ¾â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø§Ø² localStorage
    let score = parseInt(localStorage.getItem("score")) || 0;
    let tapLimit = parseInt(localStorage.getItem("tapLimit")) || 1000;
    let lastDailyClaim = localStorage.getItem("dailyReward") || "";
    const scoreDisplay = document.getElementById("score");
    const tapLimitDisplay = document.getElementById("tap-limit");
    scoreDisplay.textContent = score;
    tapLimitDisplay.textContent = tapLimit;

    const coin = document.getElementById("coin");
    const tapSound = document.getElementById("tap-sound");

    // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ùˆ Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§
    const dailyRewardBtn = document.getElementById("daily-reward");
    const shopBtn = document.getElementById("shop-btn");
    const missionsBtn = document.getElementById("missions-btn");
    const settingsBtn = document.getElementById("settings-btn");
    const shopModal = document.getElementById("shop-modal");
    const missionsModal = document.getElementById("missions-modal");
    const settingsModal = document.getElementById("settings-modal");
    const closeShopBtn = document.getElementById("close-shop");
    const closeMissionsBtn = document.getElementById("close-missions");
    const closeSettingsBtn = document.getElementById("close-settings");
    const changeSoundBtn = document.getElementById("change-sound");

    // Ø¢Ø±Ø§ÛŒÙ‡ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ (ÛŒÚ©ÛŒ Ø§Ø² Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Â«ÙÙ„Ø§ Ø¢ÛŒØªÙ… ÙØ±ÙˆØ´Ú¯Ø§Ø±Â» Ø³Ø·Ø­ 10 Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡)
    const shopItems = [
      { name: "Ø±Ø¨Ø§Øª Ø§ØªÙˆÚ©Ù„ÛŒÚ©Ø±", cost: 100 },
      { name: "Ø¨ÙˆØ³ØªØ± ØªÙ¾", cost: 150 },
      { name: "Ø§ÙØ²Ø§ÛŒØ´ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø®Ø±ÛŒØ¯", cost: 200 },
      { name: "Ú©Ø§Ù‡Ø´ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ØªÙ¾", cost: 250 },
      { name: "ÙÙ„Ø§ Ø¢ÛŒØªÙ… ÙØ±ÙˆØ´Ú¯Ø§Ø± (Ø³Ø·Ø­ 10)", cost: 500 }
    ];

    // Ø¢Ø±Ø§ÛŒÙ‡ Ù…Ø§Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§ (25 Ù…Ø§Ù…ÙˆØ±ÛŒØª Ø¨Ø§ Ø§Ù‡Ø¯Ø§Ù Ùˆ Ø¬ÙˆØ§ÛŒØ² Ù…ØªÙØ§ÙˆØª)
    const missions = [];
    for (let i = 1; i <= 25; i++) {
      missions.push({ title: `Ù…Ø§Ù…ÙˆØ±ÛŒØª ${i}: ØªÙ¾ Ú©Ù† ${i * 50} Ø¨Ø§Ø±`, goal: i * 50, reward: i * 20 });
    }

    // Ø±ÙˆÛŒØ¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø³Ú©Ù‡
    coin.addEventListener("click", () => {
      if (tapLimit > 0) {
        tapSound.currentTime = 0;
        tapSound.play();
        score++;
        tapLimit--;
        scoreDisplay.textContent = score;
        tapLimitDisplay.textContent = tapLimit;
        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage
        localStorage.setItem("score", score);
        localStorage.setItem("tapLimit", tapLimit);
      }
    });

    // Ø¯Ú©Ù…Ù‡ Ø³Ú©Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡
    dailyRewardBtn.addEventListener("click", () => {
      let today = new Date().toDateString();
      if (lastDailyClaim !== today) {
        score += 50;
        scoreDisplay.textContent = score;
        lastDailyClaim = today;
        localStorage.setItem("dailyReward", today);
        localStorage.setItem("score", score);
      } else {
        alert("Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø³Ú©Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯!");
      }
    });

    // Ù†Ù…Ø§ÛŒØ´ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
    function updateShop() {
      const shopList = document.getElementById("shop-list");
      shopList.innerHTML = "";
      shopItems.forEach(item => {
        const div = document.createElement("div");
        div.classList.add("item");
        div.innerHTML = `<span>${item.name} - ${item.cost} Ø³Ú©Ù‡</span>
                         <button class="btn" onclick="buyItem('${item.name}', ${item.cost})">Ø®Ø±ÛŒØ¯</button>`;
        shopList.appendChild(div);
      });
    }

    // ØªØ§Ø¨Ø¹ Ø®Ø±ÛŒØ¯ Ø¢ÛŒØªÙ… ÙØ±ÙˆØ´Ú¯Ø§Ù‡
    function buyItem(name, cost) {
      if (score >= cost) {
        score -= cost;
        scoreDisplay.textContent = score;
        localStorage.setItem("score", score);
        alert(`Ø¢ÛŒØªÙ… ${name} Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!`);
      } else {
        alert("Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª!");
      }
    }

    // Ù†Ù…Ø§ÛŒØ´ Ù…Ø§Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§
    function updateMissions() {
      const missionsList = document.getElementById("missions-list");
      missionsList.innerHTML = "";
      missions.forEach(mission => {
        const div = document.createElement("div");
        div.classList.add("item");
        div.innerHTML = `<span>${mission.title} (Ù‡Ø¯Ù: ${mission.goal} ØªÙ¾ - Ø¬Ø§ÛŒØ²Ù‡: ${mission.reward} Ø³Ú©Ù‡)</span>
                         <button class="btn" onclick="claimMissionReward('${mission.title}', ${mission.goal}, ${mission.reward})">Ø§Ø¹Ø·Ø§ Ø¬Ø§ÛŒØ²Ù‡</button>`;
        missionsList.appendChild(div);
      });
    }

    // ØªØ§Ø¨Ø¹ Ø§Ø¹Ø·Ø§ÛŒ Ø¬Ø§ÛŒØ²Ù‡ Ù…Ø§Ù…ÙˆØ±ÛŒØª (Ø¨Ø±Ø§ÛŒ Ù…Ø«Ø§Ù„Ø› Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ ÙÙ‚Ø· Ø¬Ø§ÛŒØ²Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ù…Ø§ Ù…Ù†Ø·Ù‚ ØªÚ©Ù…ÛŒÙ„ Ù…Ø§Ù…ÙˆØ±ÛŒØª Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ú¯Ø³ØªØ±Ø´ Ø¯Ù‡ÛŒØ¯)
    function claimMissionReward(title, goal, reward) {
      // Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ØŒ ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ú©Ø§Ø±Ø¨Ø± Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ ØªÙ¾â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ (score) Ø§Ø² Ù‡Ø¯Ù Ù…Ø§Ù…ÙˆØ±ÛŒØª Ø¨ÛŒØ´ØªØ± Ø¨Ø§Ø´Ø¯ØŒ Ø¬Ø§ÛŒØ²Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ø¯.
      if (score >= goal) {
        score += reward;
        scoreDisplay.textContent = score;
        localStorage.setItem("score", score);
        alert(`Ø¬Ø§ÛŒØ²Ù‡ ${reward} Ø³Ú©Ù‡ Ø¨Ø±Ø§ÛŒ ${title} Ø§Ø¹Ø·Ø§ Ø´Ø¯!`);
      } else {
        alert(`Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø§ÛŒØ²Ù‡ ${title} Ø¨Ø§ÛŒØ¯ ${goal} ØªÙ¾ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯!`);
      }
    }

    // Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø§ÛŒØ´/Ù¾Ù†Ù‡Ø§Ù† Ù…Ø¯Ø§Ù„â€ŒÙ‡Ø§
    function toggleModal(modal) {
      modal.classList.toggle("active");
    }
    shopBtn.addEventListener("click", () => { updateShop(); toggleModal(shopModal); });
    closeShopBtn.addEventListener("click", () => { toggleModal(shopModal); });
    missionsBtn.addEventListener("click", () => { updateMissions(); toggleModal(missionsModal); });
    closeMissionsBtn.addEventListener("click", () => { toggleModal(missionsModal); });
    settingsBtn.addEventListener("click", () => { toggleModal(settingsModal); });
    closeSettingsBtn.addEventListener("click", () => { toggleModal(settingsModal); });

    // ØªØºÛŒÛŒØ± ØµØ¯Ø§ÛŒ Ú©Ù„ÛŒÚ© (ØªÙ†Ø¸ÛŒÙ…Ø§Øª)
    changeSoundBtn.addEventListener("click", () => {
      const sounds = [
        "https://www.soundjay.com/button/beep-07.wav",
        "https://www.soundjay.com/button/beep-09.wav",
        "https://www.soundjay.com/button/button-3.wav"
      ];
      let current = tapSound.src;
      let currentIndex = sounds.indexOf(current);
      if (currentIndex === -1) currentIndex = 0;
      tapSound.src = sounds[(currentIndex + 1) % sounds.length];
      alert("ØµØ¯Ø§ÛŒ Ú©Ù„ÛŒÚ© ØªØºÛŒÛŒØ± Ú©Ø±Ø¯!");
    });
  </script>
</body>
</html>
